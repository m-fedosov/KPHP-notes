## Nginx
Веб-сервер, с которым нам предстоит работать

> Отличная статья про nginx: https://thecode.media/nginx/?ysclid=lckjay55it679404410

**Архитектура:**
![[Pasted image 20230106174928.png]]
- Всё хранится в одном конфигурационном файле. Этот файл отвечает за настройки всего сервера, и Nginx точно знает, где его быстро найти. Это более безопасно для работы сервера: никто не сможет положить в папку свой файл .htaccess, прописать в нём чёрт-те что и сломать работу всего сервера.
- Количество воркеров фиксированное и определяется в конфигурационном файле. Каждый воркер это отдельный процесс

## Nginx + Apache = ❤️
Nginx занимается самыми простыми запросами, которые можно выполнить моментально, а всю динамику и сборки отправляет в Apache и продолжает заниматься своими делами.

## Установка и настройка
Окей, как хостинг хорошо использовать [aeza](aeza.net) с почасовой оплатой

Настройка сервера: https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04

Настройка nginx: https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04

## Hello world
Заходим на наш хостинг по ssh(по telnet будет видно все пароли, которые мы передаём)

Проверка, что nginx запущен:
`systemctl status nginx`

Ответ:
![[Pasted image 20230107143314.png]]

Меняем конфиг nginx, так чтобы работал `php7.4-fpm.sock` и раздавились файлы из папки `/var/www/php` (см. лекцию)

Перезапускаем nginx `service nginx reload`

> Кстати, в процессе столкнулся с интересным багом, если изначально на сервере был установлен apache2, то даже если отключить apache и настроить nginx, стартовая страница будет такая, будто работает apache (`index.html` нужно удалить, раздаётся старый файл от apache)

