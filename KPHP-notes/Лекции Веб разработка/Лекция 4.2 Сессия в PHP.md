> Сессия - ужасное слово, ненавижу его

Как отличать пользователей сайта или приложения, для понимания, что сейчас сайтом пользуется Vasya69, Petia228 и т.д. Показывать им разный контент на сайте и давать доступ к сайту только авторизованным пользователям.

## `_Session`
Понятное дело, что все данные пользователя мы можем хранить в БД и весь контент для него брать именно оттуда. Но как понять какой пользователь заходит на сайт?

**Отчасти, для этого сделан механизм сессии**

При запуске сессии с помощью функции `session_start()`, если пользователь первый раз заходит на сайт, PHP назначает ему уникальный идентификатор сессии. Этот идентификатор с помощью cookie, которые по умолчанию называются "PHPSESSID", сохраняется в браузере пользователя. С помощью этого идентификатора пользователь ассоциируется с данными сессии. Если для пользователя уже установлена сессия, то данная функция продлевает текущую сессию вместо установки новой.

Прочитай подробнее про сессии: https://metanit.com/php/tutorial/4.3.php

## Используем на сервере

Поскольку Nginx настроен так, что видит файлы в папке `/var/www/php`
В дирректорию php, помещаем `session/index.php`, чтобы при запросе на сервер:
`[host]/session` открылся этот файл. 
В самом файле `session/index.php`, написан [скрипт сессии](https://github.com/troy4eg/php_test_backend/blob/master/session/index.php)

Сессия сохраняется в виде cookie :)
![[Pasted image 20230107155455.png]]

- Открывая сессию в новой вкладке браузера cookie value будет совпадать
- Сессия распростряняется на весь домен, но можно сделать так, чтобы она работала только в поддомене
- Сессия хранится у пользователя, если удалить cookie в настройках браузера и снова зайти на /session, то выработается новое cookie для нового пользователя
